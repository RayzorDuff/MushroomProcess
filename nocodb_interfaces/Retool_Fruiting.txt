------------------------------------------------------------
Retool UI Spec: Fruiting Room
Generated: 2026-01-23
Primary Table: lots
------------------------------------------------------------

1) Resource
   - Create a REST Resource named "NocoDB"
   - Base URL: {YOUR_NOCO_BASE_URL}/api/v2
   - Headers:
       xc-token: { { global.noco_token } }
       accept: application/json

2) Query: getData
   - Method: GET
   - Endpoint: /tables/lots/rows
   - Query params (optional):
       where = {
  "condition": "AND",
  "children": [
    {
      "column_name": "status",
      "comparator": "in",
      "value": [
        "Fruiting"
      ]
    },
    {
      "column_name": "item_category",
      "comparator": "in",
      "value": [
        "fruiting_block"
      ]
    }
  ]
}
   - Transform: return data.list

3) Table: Fruiting RoomTable
   - Data: { getData.data }
   - Primary key column: id (or lot_id if you prefer)
   - Visible columns:
       - action
       - casing_applied_at
       - fruiting_goal
       - item_category
       - item_id
       - lot_id
       - name (from item_id)
       - notes
       - spawned_at
       - status
       - strain_species_strain
       - ui_error
       - unit_size
   - Grouping (if supported):
       - name (asc)
       - strain_species_strain (asc)

4) Record Form: Fruiting RoomForm
   - Initial data: { Fruiting RoomTable.selectedRow.data }
   - Editable fields (recommended):
       - action
       - casing_applied_at
       - fruiting_goal
       - item_category
       - item_id
       - lot_id
       - name (from item_id)
       - notes
       - spawned_at
       - status
       - strain_species_strain
       - ui_error
       - unit_size

5) Actions (button bar)
   NOTE: These mirror Airtable’s pattern of writing to the single-select field `action`.
   - Button: Contaminated  → PATCH selected row: set action = Contaminated
   - Button: Compost Block  → PATCH selected row: set action = Composted
   - Button: Apply Beneficial Trichoderma  → PATCH selected row: set action = ApplyBeneficialTrichoderma
   - Button: Apply Nematodes  → PATCH selected row: set action = ApplyNematodes

   Implementation approach:
   - Create a Query "setAction" (PATCH /tables/lots/rows/{{ id }})
   - Body example:
       { "action": "<VALUE>" }
   - Each button triggers setAction with VALUE set to the desired action string.
