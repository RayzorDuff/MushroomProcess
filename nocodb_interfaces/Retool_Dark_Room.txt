------------------------------------------------------------
Retool UI Spec: Dark Room
Generated: 2026-01-23
Primary Table: lots
------------------------------------------------------------

1) Resource
   - Create a REST Resource named "NocoDB"
   - Base URL: {YOUR_NOCO_BASE_URL}/api/v2
   - Headers:
       xc-token: { { global.noco_token } }
       accept: application/json

2) Query: getData
   - Method: GET
   - Endpoint: /tables/lots/rows
   - Query params (optional):
       where = {
  "condition": "AND",
  "children": [
    {
      "column_name": "status",
      "comparator": "in",
      "value": [
        "Inoculated",
        "Colonizing",
        "Fully Colonized",
        "Fridge"
      ]
    }
  ]
}
   - Transform: return data.list

3) Table: Dark RoomTable
   - Data: { getData.data }
   - Primary key column: id (or lot_id if you prefer)
   - Visible columns:
       - action
       - casing_applied_at
       - casing_lot_id
       - created_at
       - inoculated_at
       - item_id
       - lot_id
       - notes
       - spawned_at
       - status
       - strain_species_strain
       - ui_error
       - validation
   - Grouping (if supported):
       - item_id (asc)
       - status (asc)
       - strain_species_strain (asc)

4) Record Form: Dark RoomForm
   - Initial data: { Dark RoomTable.selectedRow.data }
   - Editable fields (recommended):
       - action
       - casing_applied_at
       - casing_lot_id
       - inoculated_at
       - item_id
       - lot_id
       - notes
       - spawned_at
       - status
       - strain_species_strain
       - ui_error
       - validation

5) Actions (button bar)
   NOTE: These mirror Airtable’s pattern of writing to the single-select field `action`.
   - Button: Shake and Break  → PATCH selected row: set action = Shake
   - Button: Fully Colonized  → PATCH selected row: set action = FullyColonized
   - Button: Move to Fridge  → PATCH selected row: set action = MoveToFridge
   - Button: Cold Shock  → PATCH selected row: set action = ColdShock
   - Button: Contaminated  → PATCH selected row: set action = Contaminated
   - Button: Inviable  → PATCH selected row: set action = Inviable
   - Button: Apply Beneficial Trichoderma  → PATCH selected row: set action = ApplyBeneficialTrichoderma
   - Button: Add Nematodes  → PATCH selected row: set action = ApplyNematodes
   - Button: Apply Diatomaceous Earth  → PATCH selected row: set action = ApplyDiatomaceousEarth
   - Button: Apply Casing  → PATCH selected row: set action = ApplyCasing

   Implementation approach:
   - Create a Query "setAction" (PATCH /tables/lots/rows/{{ id }})
   - Body example:
       { "action": "<VALUE>" }
   - Each button triggers setAction with VALUE set to the desired action string.
