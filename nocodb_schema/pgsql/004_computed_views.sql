-- Generated by airtable_export_to_postgres_sql_v3.js
-- 2026-01-26T02:12:24.840Z
BEGIN;
DROP VIEW IF EXISTS "public"."vc_strains" CASCADE;
DROP VIEW IF EXISTS "public"."vc_recipes" CASCADE;
DROP VIEW IF EXISTS "public"."vc_products" CASCADE;
DROP VIEW IF EXISTS "public"."vc_lots" CASCADE;
DROP VIEW IF EXISTS "public"."vc_items" CASCADE;
DROP VIEW IF EXISTS "public"."vc_events" CASCADE;
DROP VIEW IF EXISTS "public"."vc_locations" CASCADE;
DROP VIEW IF EXISTS "public"."vc_sterilization_runs" CASCADE;
DROP VIEW IF EXISTS "public"."vc_print_queue" CASCADE;
DROP VIEW IF EXISTS "public"."vc_ecommerce" CASCADE;
DROP VIEW IF EXISTS "public"."vc_ecommerce_orders" CASCADE;

CREATE VIEW "public"."vc_strains" AS SELECT * FROM "public"."v_strains";

CREATE VIEW "public"."vc_recipes" AS SELECT * FROM "public"."v_recipes";

CREATE VIEW "public"."vc_products" AS
WITH comp AS (
  SELECT base.*,
    (SELECT COALESCE(array_agg((btbl."name"::text) ORDER BY (btbl."name"::text)) FILTER (WHERE (btbl."name"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_items_item_id" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."products_id" = base.nocopk) AS "name",
    (SELECT COALESCE(array_agg((btbl."category"::text) ORDER BY (btbl."category"::text)) FILTER (WHERE (btbl."category"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_items_item_id" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."products_id" = base.nocopk) AS "item_category",
    (SELECT COALESCE(array_agg((btbl."name"::text) ORDER BY (btbl."name"::text)) FILTER (WHERE (btbl."name"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_items_package_item" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."products_id" = base.nocopk) AS "name_from_package_item",
    (SELECT COALESCE(array_agg((btbl."category"::text) ORDER BY (btbl."category"::text)) FILTER (WHERE (btbl."category"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_items_package_item" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."products_id" = base.nocopk) AS "package_item_category",
    (SELECT COALESCE(array_agg((IF(btbl.'unit_size', ROUND(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'unit_size')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' lb', '')) ORDER BY (IF(btbl.'unit_size', ROUND(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'unit_size')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' lb', ''))) FILTER (WHERE (IF(btbl.'unit_size', ROUND(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'unit_size')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' lb', '')) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_lots_origin_lots" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."products_id" = base.nocopk) AS "unit_lbs",
    (SELECT COALESCE(array_agg((btbl."unit_size"::text) ORDER BY (btbl."unit_size"::text)) FILTER (WHERE (btbl."unit_size"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_lots_origin_lots" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."products_id" = base.nocopk) AS "unit_size",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'inoculated_at') THEN ('Inoculated: ' || to_char((btbl.'inoculated_at')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', CASE WHEN (btbl.'last_inoculation_date') THEN ('Inoculated: ' || to_char((btbl.'last_inoculation_date')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', '' )) || btbl.'source_lot_id') ORDER BY (CASE WHEN (btbl.'inoculated_at') THEN ('Inoculated: ' || to_char((btbl.'inoculated_at')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', CASE WHEN (btbl.'last_inoculation_date') THEN ('Inoculated: ' || to_char((btbl.'last_inoculation_date')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', '' )) || btbl.'source_lot_id')) FILTER (WHERE (CASE WHEN (btbl.'inoculated_at') THEN ('Inoculated: ' || to_char((btbl.'inoculated_at')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', CASE WHEN (btbl.'last_inoculation_date') THEN ('Inoculated: ' || to_char((btbl.'last_inoculation_date')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', '' )) || btbl.'source_lot_id') IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_lots_origin_lots" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."products_id" = base.nocopk) AS "label_inoc_prod",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'spawned_at') THEN ('Spawned: ' || to_char((btbl.'spawned_at')::timestamp) ELSE ('YYYY-MM-DD') END, CASE WHEN (btbl.'spawned_date') THEN ('Spawned: ' || to_char((btbl.'spawned_date')::timestamp) ELSE ('YYYY-MM-DD') END, '' ))) ORDER BY (CASE WHEN (btbl.'spawned_at') THEN ('Spawned: ' || to_char((btbl.'spawned_at')::timestamp) ELSE ('YYYY-MM-DD') END, CASE WHEN (btbl.'spawned_date') THEN ('Spawned: ' || to_char((btbl.'spawned_date')::timestamp) ELSE ('YYYY-MM-DD') END, '' )))) FILTER (WHERE (CASE WHEN (btbl.'spawned_at') THEN ('Spawned: ' || to_char((btbl.'spawned_at')::timestamp) ELSE ('YYYY-MM-DD') END, CASE WHEN (btbl.'spawned_date') THEN ('Spawned: ' || to_char((btbl.'spawned_date')::timestamp) ELSE ('YYYY-MM-DD') END, '' ))) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_lots_origin_lots" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."products_id" = base.nocopk) AS "label_spawned_prod",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'received_date') THEN ('Received: ' || to_char((btbl.'received_date')::timestamp) ELSE ('YYYY-MM-DD') END, IF(btbl.'sterilized_at', IF(LOWER((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'process_type_mat')::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text) = 'pasteurize', 'Pasteurized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD'), 'Sterilized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD') ),'' ))) ORDER BY (CASE WHEN (btbl.'received_date') THEN ('Received: ' || to_char((btbl.'received_date')::timestamp) ELSE ('YYYY-MM-DD') END, IF(btbl.'sterilized_at', IF(LOWER((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'process_type_mat')::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text) = 'pasteurize', 'Pasteurized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD'), 'Sterilized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD') ),'' )))) FILTER (WHERE (CASE WHEN (btbl.'received_date') THEN ('Received: ' || to_char((btbl.'received_date')::timestamp) ELSE ('YYYY-MM-DD') END, IF(btbl.'sterilized_at', IF(LOWER((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'process_type_mat')::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text) = 'pasteurize', 'Pasteurized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD'), 'Sterilized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD') ),'' ))) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_lots_origin_lots" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."products_id" = base.nocopk) AS "label_proc_prod",
    '{}'::text[] AS "process_type",
    (SELECT COALESCE(array_agg((btbl."species_strain"::text) ORDER BY (btbl."species_strain"::text)) FILTER (WHERE (btbl."species_strain"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_strains_strain_id" j JOIN "public"."strains" btbl ON btbl.nocopk = j."strains_id" WHERE j."products_id" = base.nocopk) AS "species_strain",
    (SELECT COALESCE(array_agg((btbl."regulated"::text) ORDER BY (btbl."regulated"::text)) FILTER (WHERE (btbl."regulated"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_products_strains_strain_id" j JOIN "public"."strains" btbl ON btbl.nocopk = j."strains_id" WHERE j."products_id" = base.nocopk) AS "origin_strain_regulated"
  FROM "public"."v_products" base
)
SELECT comp.*,
  ('PROD-' || to_char((comp."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((comp."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)) AS "product_id",
  (CASE WHEN (((comp.'item_category_mat' = 'freezedriedmushrooms') ((comp.'item_category_mat' = 'fresh_mushrooms')))) THEN (CASE WHEN (comp.'origin_strain_regulated') ELSE (NULL) END THEN ('https://www.regulatedbusiness.com/') ELSE ('https://www.mybusiness.com/') END, 'https://www.mybusiness.com/' )) AS "public_link",
  (CASE WHEN (comp.'origin_strain_regulated') THEN (CASE WHEN (((comp.'item_category_mat' = 'freezedriedmushrooms') ((comp.'item_category_mat' = 'fresh_mushrooms')) ((comp.'item_category_mat' = 'freezer_tray')) ((comp.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('Regulated Business') ELSE ('My Business') END, 'My Business')) AS "label_company_prod",
  (CASE WHEN (comp.'origin_strain_regulated') THEN (CASE WHEN (((comp.'item_category_mat' = 'freezedriedmushrooms') ((comp.'item_category_mat' = 'fresh_mushrooms')) ((comp.'item_category_mat' = 'freezer_tray')) ((comp.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('RegulatedBusinessAddressAndContact') ELSE ('MyBuinessAddressAndContact') END, 'MyBuinessAddressAndContact')) AS "label_companyaddress_prod",
  (CASE WHEN (comp.'origin_strain_regulated') THEN (CASE WHEN (((comp.'item_category_mat' = 'freezedriedmushrooms') ((comp.'item_category_mat' = 'fresh_mushrooms')) ((comp.'item_category_mat' = 'freezer_tray')) ((comp.'item_category_mat' = 'fresh_tray')) ((comp.'item_category_mat' = 'fruitingblock')))) ELSE (NULL) END THEN ('') ELSE ('Disclaimer: Psilocybin is classified as a Schedule I controlled substance by the U.S. Drug Enforcement Administration (DEA). Unauthorized cultivation, possession, or distribution of psilocybin-containing mushrooms is illegal in most states. It is the responsibility of the buyer to research and comply with all local, state, and federal laws regarding mushroom cultivation. Please consult your local laws carefully before any attempt to grow mushrooms, as penalties for non-compliance can be significant.') END, '')) AS "label_disclaimer_prod",
  (CASE WHEN (comp.'origin_strain_regulated') THEN (CASE WHEN (((comp.'item_category_mat' = 'freezedriedmushrooms') ((comp.'item_category_mat' = 'fresh_mushrooms')) ((comp.'item_category_mat' = 'freezer_tray')) ((comp.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('') ELSE (CASE WHEN (comp.'item_category_mat' = 'fruiting_block') END THEN ('MyBusinessOffering') ELSE ('') END ), CASE WHEN (((comp.'item_category_mat' = 'freezedriedmushrooms') ((comp.'item_category_mat' = 'fresh_mushrooms')) ((comp.'item_category_mat' = 'fruiting_block')))) THEN ('MyBusinessOffering') ELSE ('') END )) AS "label_companyinfo_prod",
  (CASE WHEN (comp.'origin_strain_regulated') THEN (CASE WHEN (((comp.'item_category_mat' = 'freezedriedmushrooms') ((comp.'item_category_mat' = 'fresh_mushrooms')) ((comp.'item_category_mat' = 'freezer_tray')) ((comp.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('') ELSE (CASE WHEN (((comp.'item_category_mat' = 'freezedriedmushrooms') ((comp.'item_category_mat' = 'fresh_mushrooms')))) END THEN ('This product was produced in a home kitchen that is not subject to state licensure or inspection and that may also contain common food allergies such as tree nuts, peanuts, eggs, soy, wheat, milk, fish, and crustacean shellfish. This product is not intended for resale.') ELSE (CASE WHEN (comp.'item_category_mat' = 'fruiting_block') END THEN ('This product contains ingredients designed for mushroom cultivation. This product is not intended for human consumption.') ELSE ('') END ) ), CASE WHEN (((comp.'item_category_mat' = 'freezedriedmushrooms') ((comp.'item_category_mat' = 'fresh_mushrooms')))) THEN ('This product was produced in a home kitchen that is not subject to state licensure or inspection and that may also contain common food allergies such as tree nuts, peanuts, eggs, soy, wheat, milk, fish, and crustacean shellfish. This product is not intended for resale.') ELSE (CASE WHEN (comp.'item_category_mat' = 'fruiting_block') END THEN ('This product contains ingredients designed for mushroom cultivation. This product is not intended for human consumption.') ELSE ('') END ) )) AS "label_cottage_prod",
  (CASE WHEN (comp.'item_category_mat') = ('grain') THEN (comp.'name_mat' || ' Grain') WHEN (comp.'item_category_mat') = ('substrate') THEN (comp.'name_mat' || ' Substrate') WHEN (comp.'item_category_mat') = ('fruiting_block') THEN (comp.'name_mat') WHEN (comp.'item_category_mat') = ('lc_syringe') THEN (comp.'name_mat') WHEN (comp.'item_category_mat') = ('freezedriedmushrooms') THEN (comp.'name_mat') WHEN (comp.'item_category_mat') = ('freezer_tray') THEN (comp.'name_mat') WHEN (comp.'item_category_mat') = ('fresh_tray') THEN (comp.'name_mat') WHEN (comp.'item_category_mat') = ('fresh_mushrooms') THEN (comp.'name_mat') ELSE ('') END) AS "label_title_prod",
  (CASE WHEN (comp.'item_category_mat') = ('grain') THEN (CASE WHEN (comp.'unit_lbs') ELSE ('') END THEN (comp.'unit_lbs' || '  ' || comp.'process_type' || 'd') ELSE ('') END, 'substrate', CASE WHEN (comp.'unit_lbs') THEN (comp.'unit_lbs' || '  ' || comp.'process_type' || 'd') ELSE ('') END, 'fruiting_block', CASE WHEN (comp.'unit_lbs') THEN (comp.'unit_lbs' || '  ') ELSE (' ') END || comp.'species_strain' || '', 'lc_syringe', IF(comp.'net_volume_ml', ROUND((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((comp.'net_volume_ml')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, (((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' mL  ', '') || comp.'species_strain' || '', 'freezedriedmushrooms', IF(comp.'package_size_g', ROUND(comp.'package_size_g',2) || ' g  ', '') || comp.'species_strain' || '', 'freezer_tray', IF(comp.'net_weight_g', ROUND(comp.'net_weight_g',2) || ' g  ', '') || comp.'species_strain' || '', 'fresh_tray', IF(comp.'net_weight_g', ROUND(comp.'net_weight_g',2) || ' g  ', '') || comp.'species_strain' || '', 'fresh_mushrooms', IF(comp.'package_size_g', ROUND(comp.'package_size_g',2) || ' g  ', '') || comp.'species_strain' || '', '')) AS "label_subtitle_prod",
  (comp.'product_id') AS "label_footer_prod",
  (CASE WHEN (comp.'pack_date') THEN ('Packaged: ' || to_char(((comp.'pack_date'))::timestamp) ELSE ('YYYY-MM-DD') END, '')) AS "label_packaged_prod",
  (CASE WHEN (comp.'use_by') THEN ('Use by: ' || to_char(((comp.'use_by'))::timestamp) ELSE ('YYYY-MM-DD') END, '' )) AS "label_useby_prod"
FROM comp;

CREATE VIEW "public"."vc_lots" AS
WITH comp AS (
  SELECT base.*,
    (SELECT COALESCE(array_agg((btbl."name"::text) ORDER BY (btbl."name"::text)) FILTER (WHERE (btbl."name"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_items_item_id" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."lots_id" = base.nocopk) AS "item_name",
    (SELECT COALESCE(array_agg((btbl."name"::text) ORDER BY (btbl."name"::text)) FILTER (WHERE (btbl."name"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_recipes_recipe_id" j JOIN "public"."recipes" btbl ON btbl.nocopk = j."recipes_id" WHERE j."lots_id" = base.nocopk) AS "recipe_name",
    (SELECT COALESCE(array_agg((btbl."regulated"::text) ORDER BY (btbl."regulated"::text)) FILTER (WHERE (btbl."regulated"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_strains_strain_id" j JOIN "public"."strains" btbl ON btbl.nocopk = j."strains_id" WHERE j."lots_id" = base.nocopk) AS "regulated_from_strain_id",
    (SELECT COALESCE(array_agg((btbl."species_strain"::text) ORDER BY (btbl."species_strain"::text)) FILTER (WHERE (btbl."species_strain"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_strains_strain_id" j JOIN "public"."strains" btbl ON btbl.nocopk = j."strains_id" WHERE j."lots_id" = base.nocopk) AS "strain_species_strain",
    (SELECT COALESCE(array_agg((btbl."process_type"::text) ORDER BY (btbl."process_type"::text)) FILTER (WHERE (btbl."process_type"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_sterilization_runs_steri_run_id" j JOIN "public"."sterilization_runs" btbl ON btbl.nocopk = j."sterilization_runs_id" WHERE j."lots_id" = base.nocopk) AS "process_type_from_steri_run_id",
    (SELECT COALESCE(array_agg((btbl."category"::text) ORDER BY (btbl."category"::text)) FILTER (WHERE (btbl."category"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_items_item_id" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."lots_id" = base.nocopk) AS "item_category",
    '{}'::text[] AS "strain_species_strain_from_lc_lot_id",
    (SELECT COALESCE(array_agg((btbl."vendor_name"::text) ORDER BY (btbl."vendor_name"::text)) FILTER (WHERE (btbl."vendor_name"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_lots_target_lot_ids" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots1_id" WHERE j."lots_id" = base.nocopk) AS "vendor_name_from_lc_lot_id",
    (SELECT COALESCE(array_agg((btbl."item_name_mat"::text) ORDER BY (btbl."item_name_mat"::text)) FILTER (WHERE (btbl."item_name_mat"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_lots_grain_inputs" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots1_id" WHERE j."lots_id" = base.nocopk) AS "item_name_mat_from_grain_inputs",
    (SELECT COALESCE(array_agg((btbl."inoculated_at"::text) ORDER BY (btbl."inoculated_at"::text)) FILTER (WHERE (btbl."inoculated_at"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_lots_grain_inputs" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots1_id" WHERE j."lots_id" = base.nocopk) AS "inoculated_at_from_grain_inputs",
    (SELECT COALESCE(array_agg((btbl."process_type_mat"::text) ORDER BY (btbl."process_type_mat"::text)) FILTER (WHERE (btbl."process_type_mat"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_lots_substrate_inputs" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots1_id" WHERE j."lots_id" = base.nocopk) AS "process_type_mat_from_substrate_inputs",
    (SELECT COALESCE(array_agg((btbl."item_name_mat"::text) ORDER BY (btbl."item_name_mat"::text)) FILTER (WHERE (btbl."item_name_mat"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_lots_substrate_inputs" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots1_id" WHERE j."lots_id" = base.nocopk) AS "item_name_mat_from_substrate_inputs",
    (SELECT COALESCE(array_agg((btbl."category"::text) ORDER BY (btbl."category"::text)) FILTER (WHERE (btbl."category"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_items_harvest_item" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."lots_id" = base.nocopk) AS "harvest_item_category",
    '{}'::text[] AS "name_from_products",
    '{}'::text[] AS "category_from_item_id_from_products",
    (SELECT COALESCE(array_agg((btbl."timestamp"::text) ORDER BY (btbl."timestamp"::text)) FILTER (WHERE (btbl."timestamp"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_events_events" j JOIN "public"."events" btbl ON btbl.nocopk = j."events_id" WHERE j."lots_id" = base.nocopk) AS "spawned_date",
    (SELECT COALESCE(array_agg((btbl."timestamp"::text) ORDER BY (btbl."timestamp"::text)) FILTER (WHERE (btbl."timestamp"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_events_events" j JOIN "public"."events" btbl ON btbl.nocopk = j."events_id" WHERE j."lots_id" = base.nocopk) AS "last_inoculation_date",
    (SELECT COALESCE(array_agg((btbl."timestamp"::text) ORDER BY (btbl."timestamp"::text)) FILTER (WHERE (btbl."timestamp"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_events_events" j JOIN "public"."events" btbl ON btbl.nocopk = j."events_id" WHERE j."lots_id" = base.nocopk) AS "first_event_date",
    (SELECT COALESCE(array_agg((btbl."timestamp"::text) ORDER BY (btbl."timestamp"::text)) FILTER (WHERE (btbl."timestamp"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_lots_events_events" j JOIN "public"."events" btbl ON btbl.nocopk = j."events_id" WHERE j."lots_id" = base.nocopk) AS "last_event_date"
  FROM "public"."v_lots" base
)
SELECT comp.*,
  ('LOT-' || to_char((comp."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((comp."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)) AS "lot_id",
  ('My Business') AS "label_company_lot",
  (IF(comp.'unit_size', ROUND(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((comp.'unit_size')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' lb', '')) AS "unit_lbs",
  (CASE WHEN (comp.'inoculated_at') THEN ('Inoculated: ' || to_char((comp.'inoculated_at')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', CASE WHEN (comp.'last_inoculation_date') THEN ('Inoculated: ' || to_char((comp.'last_inoculation_date')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', '' )) || comp.'source_lot_id') AS "label_inoc_line",
  (CASE WHEN (comp.'spawned_at') THEN ('Spawned: ' || to_char((comp.'spawned_at')::timestamp) ELSE ('YYYY-MM-DD') END, CASE WHEN (comp.'spawned_date') THEN ('Spawned: ' || to_char((comp.'spawned_date')::timestamp) ELSE ('YYYY-MM-DD') END, '' ))) AS "label_spawned_line",
  (CASE WHEN (comp.'use_by') THEN ('Use by: ' || to_char(((comp.'use_by'))::timestamp) ELSE ('YYYY-MM-DD') END, '' )) AS "label_useby_line",
  (CASE WHEN (comp.'label_template') = ('Grain_Inoculated') THEN ('Grain: ' || comp.'item_name_mat' || '') WHEN (comp.'label_template') = ('LC_Flask_Inoculated') THEN ('Liquid Culture  Flask') WHEN (comp.'label_template') = ('Plate_Inoculated') THEN (comp.'item_name_mat' || '') WHEN (comp.'label_template') = ('Bulk_Created') THEN (comp.'item_name_mat' || '') WHEN (comp.'label_template') = ('LC_Syringe_Received') THEN (comp.'item_name_mat' || '') ELSE ('') END) AS "label_title_lot",
  (SWITCH( comp.'label_template', 'Grain_Inoculated', IF(comp.'unit_size', ROUND(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((comp.'unit_size')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' lb  ', '') || comp.'strain_species_strain' || ' ' || comp.'vendor_name_from_lc_lot_id' || '', 'Plate_Inoculated', IF(comp.'strain_species_strain', comp.'strain_species_strain', comp.'notes') || '', 'LC_Flask_Inoculated', IF(comp.'remaining_volume_ml', comp.'remaining_volume_ml' || ' ml  ', '') || comp.'strain_species_strain' || ' ' || comp.'vendor_name_from_lc_lot_id' || '', 'LC_Syringe_Received', IF(comp.'remaining_volume_ml', comp.'remaining_volume_ml' || ' ml  ', '') || comp.'strain_species_strain' || ' ' || comp.'vendor_name' || ' ' || comp.'vendor_batch' || '', 'Bulk_Created', IF(comp.'unit_size', ROUND(comp.'unit_size',2) || ' lb  ', '') || comp.'strain_species_strain' || ' ' || comp.'vendor_name_from_lc_lot_id' || '', '')) AS "label_subtitle_lot",
  ('Lot: ' || comp.'lot_id') AS "label_footer_lot",
  (CASE WHEN (comp.'received_date') THEN ('Received: ' || to_char((comp.'received_date')::timestamp) ELSE ('YYYY-MM-DD') END, IF(comp.'sterilized_at', IF(LOWER((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((comp.'process_type_mat')::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text) = 'pasteurize', 'Pasteurized: ' || DATETIME_FORMAT(comp.'sterilized_at', 'YYYY-MM-DD'), 'Sterilized: ' || DATETIME_FORMAT(comp.'sterilized_at', 'YYYY-MM-DD') ),'' ))) AS "label_proc_line",
  (CASE WHEN (comp.'spawned_date') THEN (CASE WHEN (comp.'inoculated_at_from_grain_inputs') ELSE (NULL) END THEN (comp.'item_name_mat_from_grain_inputs' || ' ' || to_char((comp.'inoculated_at_from_grain_inputs')::timestamp) ELSE ('YYYY-MM-DD') END, ''), '' )) AS "label_graininputblocks_line",
  (CASE WHEN (comp.'spawned_date') THEN (comp.'process_type_mat_from_substrate_inputs' || 'd ' || comp.'item_name_mat_from_substrate_inputs') ELSE ('') END) AS "label_substrateinputblocks_line",
  ('https://airtable.com/appxJ59Wmyd96jXMm/pagWksRvwslppY76o(ByfiZ=' || comp."airtable_id") AS "public_link",
  ('https://airtable.com/appxJ59Wmyd96jXMm/pagJhBDbljrVzBkye(9APYL=' || comp."airtable_id") AS "public_link_dark_room",
  ('https://airtable.com/appxJ59Wmyd96jXMm/pagttgRxM4k6lahsp(jmVTq=' || comp."airtable_id") AS "public_link_fruiting",
  ('FIXME' || comp."airtable_id") AS "public_link_harvest",
  ('https://airtable.com/appxJ59Wmyd96jXMm/pagR4tAJvqmh3llqt(PivwV=' || comp."airtable_id") AS "public_link_spawn_to_bulk",
  ('https://airtable.com/appxJ59Wmyd96jXMm/paglNTehzE6kSB5zX(UPFEz=' || comp."airtable_id") AS "public_link_inoculate_flask",
  ('https://airtable.com/appxJ59Wmyd96jXMm/pagbsdJa1bNycfeCP(9boTG=' || comp."airtable_id") AS "public_link_inoculate_grain",
  ('FIXME' || comp."airtable_id") AS "public_link_freeze_dry_package",
  ('https://airtable.com/appxJ59Wmyd96jXMm/pagpd4iKvhBjM98NJ/preview(6Mp29=' || comp."airtable_id") AS "public_link_substrate_package",
  ('https://airtable.com/appxJ59Wmyd96jXMm/pagy6IGrvfVAVo9Sl(YckDK=' || comp."airtable_id") AS "public_link_lot_lineage"
FROM comp;

CREATE VIEW "public"."vc_items" AS SELECT * FROM "public"."v_items";

CREATE VIEW "public"."vc_events" AS
WITH comp AS (
  SELECT base.*,
    (SELECT COALESCE(array_agg((btbl."status"::text) ORDER BY (btbl."status"::text)) FILTER (WHERE (btbl."status"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_events_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."events_id" = base.nocopk) AS "status_from_lot_id",
    '{}'::text[] AS "storage_location_from_product_id",
    '{}'::text[] AS "grain_inputs_from_lot_id",
    '{}'::text[] AS "substrate_inputs_from_lot_id",
    '{}'::text[] AS "vendor_name_from_lc_lot_id_from_lot_id",
    '{}'::text[] AS "strain_species_strain_from_lot_id"
  FROM "public"."v_events" base
)
SELECT comp.*,
  ('EVENT-' || to_char((comp."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((comp."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)) AS "event_id",
  (CASE WHEN (comp.'timestamp') THEN (comp.'timestamp') ELSE (comp."nc_created_at") END) AS "event_time_for_rollup"
FROM comp;

CREATE VIEW "public"."vc_locations" AS SELECT * FROM "public"."v_locations";

CREATE VIEW "public"."vc_sterilization_runs" AS
WITH comp AS (
  SELECT base.*,
    (SELECT COALESCE(array_agg((btbl."default_unit_size"::text) ORDER BY (btbl."default_unit_size"::text)) FILTER (WHERE (btbl."default_unit_size"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_sterilization_runs_items_planned_item" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."sterilization_runs_id" = base.nocopk) AS "default_unit_size_from_planned_item",
    (SELECT COALESCE(array_agg((btbl."item_id"::text) ORDER BY (btbl."item_id"::text)) FILTER (WHERE (btbl."item_id"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_sterilization_runs_items_planned_item" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."sterilization_runs_id" = base.nocopk) AS "planned_item_id",
    (SELECT COALESCE(array_agg((btbl."name"::text) ORDER BY (btbl."name"::text)) FILTER (WHERE (btbl."name"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_sterilization_runs_items_planned_item" j JOIN "public"."items" btbl ON btbl.nocopk = j."items_id" WHERE j."sterilization_runs_id" = base.nocopk) AS "planned_item_name",
    (SELECT COALESCE(array_agg((btbl."recipe_id"::text) ORDER BY (btbl."recipe_id"::text)) FILTER (WHERE (btbl."recipe_id"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_sterilization_runs_recipes_planned_recipe" j JOIN "public"."recipes" btbl ON btbl.nocopk = j."recipes_id" WHERE j."sterilization_runs_id" = base.nocopk) AS "recipe_id_from_planned_recipe",
    (SELECT COALESCE(array_agg((btbl."name"::text) ORDER BY (btbl."name"::text)) FILTER (WHERE (btbl."name"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_sterilization_runs_recipes_planned_recipe" j JOIN "public"."recipes" btbl ON btbl.nocopk = j."recipes_id" WHERE j."sterilization_runs_id" = base.nocopk) AS "name_from_planned_recipe"
  FROM "public"."v_sterilization_runs" base
)
SELECT comp.*,
  ('RUN-' || to_char((comp."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((comp."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)) AS "steri_run_id"
FROM comp;

CREATE VIEW "public"."vc_print_queue" AS
WITH comp AS (
  SELECT base.*,
    (SELECT COALESCE(array_agg((btbl."item_category_mat"::text) ORDER BY (btbl."item_category_mat"::text)) FILTER (WHERE (btbl."item_category_mat"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "item_category_mat_from_lot_id",
    (SELECT COALESCE(array_agg(('https://airtable.com/appxJ59Wmyd96jXMm/pagWksRvwslppY76o(ByfiZ=' || btbl."airtable_id") ORDER BY ('https://airtable.com/appxJ59Wmyd96jXMm/pagWksRvwslppY76o(ByfiZ=' || btbl."airtable_id")) FILTER (WHERE ('https://airtable.com/appxJ59Wmyd96jXMm/pagWksRvwslppY76o(ByfiZ=' || btbl."airtable_id") IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "public_link_from_lot_id",
    (SELECT COALESCE(array_agg(('My Business') ORDER BY ('My Business')) FILTER (WHERE ('My Business') IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_company_lot_from_lot_id",
    (SELECT COALESCE(array_agg((btbl."item_category_mat"::text) ORDER BY (btbl."item_category_mat"::text)) FILTER (WHERE (btbl."item_category_mat"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "item_category_mat_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')))) THEN (CASE WHEN (btbl.'origin_strain_regulated') ELSE (NULL) END THEN ('https://www.regulatedbusiness.com/') ELSE ('https://www.mybusiness.com/') END, 'https://www.mybusiness.com/' )) ORDER BY (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')))) THEN (CASE WHEN (btbl.'origin_strain_regulated') ELSE (NULL) END THEN ('https://www.regulatedbusiness.com/') ELSE ('https://www.mybusiness.com/') END, 'https://www.mybusiness.com/' ))) FILTER (WHERE (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')))) THEN (CASE WHEN (btbl.'origin_strain_regulated') ELSE (NULL) END THEN ('https://www.regulatedbusiness.com/') ELSE ('https://www.mybusiness.com/') END, 'https://www.mybusiness.com/' )) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "public_link_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'spawned_date') THEN (btbl.'process_type_mat_from_substrate_inputs' || 'd ' || btbl.'item_name_mat_from_substrate_inputs') ELSE ('') END) ORDER BY (CASE WHEN (btbl.'spawned_date') THEN (btbl.'process_type_mat_from_substrate_inputs' || 'd ' || btbl.'item_name_mat_from_substrate_inputs') ELSE ('') END)) FILTER (WHERE (CASE WHEN (btbl.'spawned_date') THEN (btbl.'process_type_mat_from_substrate_inputs' || 'd ' || btbl.'item_name_mat_from_substrate_inputs') ELSE ('') END) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_substrateinputblocks_line_from_lot_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'spawned_date') THEN (CASE WHEN (btbl.'inoculated_at_from_grain_inputs') ELSE (NULL) END THEN (btbl.'item_name_mat_from_grain_inputs' || ' ' || to_char((btbl.'inoculated_at_from_grain_inputs')::timestamp) ELSE ('YYYY-MM-DD') END, ''), '' )) ORDER BY (CASE WHEN (btbl.'spawned_date') THEN (CASE WHEN (btbl.'inoculated_at_from_grain_inputs') ELSE (NULL) END THEN (btbl.'item_name_mat_from_grain_inputs' || ' ' || to_char((btbl.'inoculated_at_from_grain_inputs')::timestamp) ELSE ('YYYY-MM-DD') END, ''), '' ))) FILTER (WHERE (CASE WHEN (btbl.'spawned_date') THEN (CASE WHEN (btbl.'inoculated_at_from_grain_inputs') ELSE (NULL) END THEN (btbl.'item_name_mat_from_grain_inputs' || ' ' || to_char((btbl.'inoculated_at_from_grain_inputs')::timestamp) ELSE ('YYYY-MM-DD') END, ''), '' )) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_graininputblocks_line_from_lot_id",
    (SELECT COALESCE(array_agg(('Lot: ' || btbl.'lot_id') ORDER BY ('Lot: ' || btbl.'lot_id')) FILTER (WHERE ('Lot: ' || btbl.'lot_id') IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_footer_lot_from_lot_id",
    (SELECT COALESCE(array_agg((SWITCH( btbl.'label_template', 'Grain_Inoculated', IF(btbl.'unit_size', ROUND(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'unit_size')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' lb  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name_from_lc_lot_id' || '', 'Plate_Inoculated', IF(btbl.'strain_species_strain', btbl.'strain_species_strain', btbl.'notes') || '', 'LC_Flask_Inoculated', IF(btbl.'remaining_volume_ml', btbl.'remaining_volume_ml' || ' ml  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name_from_lc_lot_id' || '', 'LC_Syringe_Received', IF(btbl.'remaining_volume_ml', btbl.'remaining_volume_ml' || ' ml  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name' || ' ' || btbl.'vendor_batch' || '', 'Bulk_Created', IF(btbl.'unit_size', ROUND(btbl.'unit_size',2) || ' lb  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name_from_lc_lot_id' || '', '')) ORDER BY (SWITCH( btbl.'label_template', 'Grain_Inoculated', IF(btbl.'unit_size', ROUND(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'unit_size')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' lb  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name_from_lc_lot_id' || '', 'Plate_Inoculated', IF(btbl.'strain_species_strain', btbl.'strain_species_strain', btbl.'notes') || '', 'LC_Flask_Inoculated', IF(btbl.'remaining_volume_ml', btbl.'remaining_volume_ml' || ' ml  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name_from_lc_lot_id' || '', 'LC_Syringe_Received', IF(btbl.'remaining_volume_ml', btbl.'remaining_volume_ml' || ' ml  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name' || ' ' || btbl.'vendor_batch' || '', 'Bulk_Created', IF(btbl.'unit_size', ROUND(btbl.'unit_size',2) || ' lb  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name_from_lc_lot_id' || '', ''))) FILTER (WHERE (SWITCH( btbl.'label_template', 'Grain_Inoculated', IF(btbl.'unit_size', ROUND(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'unit_size')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' lb  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name_from_lc_lot_id' || '', 'Plate_Inoculated', IF(btbl.'strain_species_strain', btbl.'strain_species_strain', btbl.'notes') || '', 'LC_Flask_Inoculated', IF(btbl.'remaining_volume_ml', btbl.'remaining_volume_ml' || ' ml  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name_from_lc_lot_id' || '', 'LC_Syringe_Received', IF(btbl.'remaining_volume_ml', btbl.'remaining_volume_ml' || ' ml  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name' || ' ' || btbl.'vendor_batch' || '', 'Bulk_Created', IF(btbl.'unit_size', ROUND(btbl.'unit_size',2) || ' lb  ', '') || btbl.'strain_species_strain' || ' ' || btbl.'vendor_name_from_lc_lot_id' || '', '')) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_subtitle_lot_from_lot_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'label_template') = ('Grain_Inoculated') THEN ('Grain: ' || btbl.'item_name_mat' || '') WHEN (btbl.'label_template') = ('LC_Flask_Inoculated') THEN ('Liquid Culture  Flask') WHEN (btbl.'label_template') = ('Plate_Inoculated') THEN (btbl.'item_name_mat' || '') WHEN (btbl.'label_template') = ('Bulk_Created') THEN (btbl.'item_name_mat' || '') WHEN (btbl.'label_template') = ('LC_Syringe_Received') THEN (btbl.'item_name_mat' || '') ELSE ('') END) ORDER BY (CASE WHEN (btbl.'label_template') = ('Grain_Inoculated') THEN ('Grain: ' || btbl.'item_name_mat' || '') WHEN (btbl.'label_template') = ('LC_Flask_Inoculated') THEN ('Liquid Culture  Flask') WHEN (btbl.'label_template') = ('Plate_Inoculated') THEN (btbl.'item_name_mat' || '') WHEN (btbl.'label_template') = ('Bulk_Created') THEN (btbl.'item_name_mat' || '') WHEN (btbl.'label_template') = ('LC_Syringe_Received') THEN (btbl.'item_name_mat' || '') ELSE ('') END)) FILTER (WHERE (CASE WHEN (btbl.'label_template') = ('Grain_Inoculated') THEN ('Grain: ' || btbl.'item_name_mat' || '') WHEN (btbl.'label_template') = ('LC_Flask_Inoculated') THEN ('Liquid Culture  Flask') WHEN (btbl.'label_template') = ('Plate_Inoculated') THEN (btbl.'item_name_mat' || '') WHEN (btbl.'label_template') = ('Bulk_Created') THEN (btbl.'item_name_mat' || '') WHEN (btbl.'label_template') = ('LC_Syringe_Received') THEN (btbl.'item_name_mat' || '') ELSE ('') END) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_title_lot_from_lot_id",
    (SELECT COALESCE(array_agg((btbl."label_template"::text) ORDER BY (btbl."label_template"::text)) FILTER (WHERE (btbl."label_template"::text) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_template_from_lot_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'use_by') THEN ('Use by: ' || to_char(((btbl.'use_by'))::timestamp) ELSE ('YYYY-MM-DD') END, '' )) ORDER BY (CASE WHEN (btbl.'use_by') THEN ('Use by: ' || to_char(((btbl.'use_by'))::timestamp) ELSE ('YYYY-MM-DD') END, '' ))) FILTER (WHERE (CASE WHEN (btbl.'use_by') THEN ('Use by: ' || to_char(((btbl.'use_by'))::timestamp) ELSE ('YYYY-MM-DD') END, '' )) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_useby_line_from_lot_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'spawned_at') THEN ('Spawned: ' || to_char((btbl.'spawned_at')::timestamp) ELSE ('YYYY-MM-DD') END, CASE WHEN (btbl.'spawned_date') THEN ('Spawned: ' || to_char((btbl.'spawned_date')::timestamp) ELSE ('YYYY-MM-DD') END, '' ))) ORDER BY (CASE WHEN (btbl.'spawned_at') THEN ('Spawned: ' || to_char((btbl.'spawned_at')::timestamp) ELSE ('YYYY-MM-DD') END, CASE WHEN (btbl.'spawned_date') THEN ('Spawned: ' || to_char((btbl.'spawned_date')::timestamp) ELSE ('YYYY-MM-DD') END, '' )))) FILTER (WHERE (CASE WHEN (btbl.'spawned_at') THEN ('Spawned: ' || to_char((btbl.'spawned_at')::timestamp) ELSE ('YYYY-MM-DD') END, CASE WHEN (btbl.'spawned_date') THEN ('Spawned: ' || to_char((btbl.'spawned_date')::timestamp) ELSE ('YYYY-MM-DD') END, '' ))) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_spawned_line_from_lot_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'inoculated_at') THEN ('Inoculated: ' || to_char((btbl.'inoculated_at')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', CASE WHEN (btbl.'last_inoculation_date') THEN ('Inoculated: ' || to_char((btbl.'last_inoculation_date')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', '' )) || btbl.'source_lot_id') ORDER BY (CASE WHEN (btbl.'inoculated_at') THEN ('Inoculated: ' || to_char((btbl.'inoculated_at')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', CASE WHEN (btbl.'last_inoculation_date') THEN ('Inoculated: ' || to_char((btbl.'last_inoculation_date')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', '' )) || btbl.'source_lot_id')) FILTER (WHERE (CASE WHEN (btbl.'inoculated_at') THEN ('Inoculated: ' || to_char((btbl.'inoculated_at')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', CASE WHEN (btbl.'last_inoculation_date') THEN ('Inoculated: ' || to_char((btbl.'last_inoculation_date')::timestamp) ELSE ('YYYY-MM-DD') END || ' ', '' )) || btbl.'source_lot_id') IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_inoc_line_from_lot_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'received_date') THEN ('Received: ' || to_char((btbl.'received_date')::timestamp) ELSE ('YYYY-MM-DD') END, IF(btbl.'sterilized_at', IF(LOWER((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'process_type_mat')::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text) = 'pasteurize', 'Pasteurized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD'), 'Sterilized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD') ),'' ))) ORDER BY (CASE WHEN (btbl.'received_date') THEN ('Received: ' || to_char((btbl.'received_date')::timestamp) ELSE ('YYYY-MM-DD') END, IF(btbl.'sterilized_at', IF(LOWER((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'process_type_mat')::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text) = 'pasteurize', 'Pasteurized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD'), 'Sterilized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD') ),'' )))) FILTER (WHERE (CASE WHEN (btbl.'received_date') THEN ('Received: ' || to_char((btbl.'received_date')::timestamp) ELSE ('YYYY-MM-DD') END, IF(btbl.'sterilized_at', IF(LOWER((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'process_type_mat')::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text) = 'pasteurize', 'Pasteurized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD'), 'Sterilized: ' || DATETIME_FORMAT(btbl.'sterilized_at', 'YYYY-MM-DD') ),'' ))) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_lots_lot_id" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."print_queue_id" = base.nocopk) AS "label_proc_line_from_lot_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('Regulated Business') ELSE ('My Business') END, 'My Business')) ORDER BY (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('Regulated Business') ELSE ('My Business') END, 'My Business'))) FILTER (WHERE (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('Regulated Business') ELSE ('My Business') END, 'My Business')) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_company_prod_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'item_category_mat') = ('grain') THEN (btbl.'name_mat' || ' Grain') WHEN (btbl.'item_category_mat') = ('substrate') THEN (btbl.'name_mat' || ' Substrate') WHEN (btbl.'item_category_mat') = ('fruiting_block') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('lc_syringe') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('freezedriedmushrooms') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('freezer_tray') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('fresh_tray') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('fresh_mushrooms') THEN (btbl.'name_mat') ELSE ('') END) ORDER BY (CASE WHEN (btbl.'item_category_mat') = ('grain') THEN (btbl.'name_mat' || ' Grain') WHEN (btbl.'item_category_mat') = ('substrate') THEN (btbl.'name_mat' || ' Substrate') WHEN (btbl.'item_category_mat') = ('fruiting_block') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('lc_syringe') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('freezedriedmushrooms') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('freezer_tray') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('fresh_tray') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('fresh_mushrooms') THEN (btbl.'name_mat') ELSE ('') END)) FILTER (WHERE (CASE WHEN (btbl.'item_category_mat') = ('grain') THEN (btbl.'name_mat' || ' Grain') WHEN (btbl.'item_category_mat') = ('substrate') THEN (btbl.'name_mat' || ' Substrate') WHEN (btbl.'item_category_mat') = ('fruiting_block') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('lc_syringe') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('freezedriedmushrooms') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('freezer_tray') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('fresh_tray') THEN (btbl.'name_mat') WHEN (btbl.'item_category_mat') = ('fresh_mushrooms') THEN (btbl.'name_mat') ELSE ('') END) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_title_prod_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'item_category_mat') = ('grain') THEN (CASE WHEN (btbl.'unit_lbs') ELSE ('') END THEN (btbl.'unit_lbs' || '  ' || btbl.'process_type' || 'd') ELSE ('') END, 'substrate', CASE WHEN (btbl.'unit_lbs') THEN (btbl.'unit_lbs' || '  ' || btbl.'process_type' || 'd') ELSE ('') END, 'fruiting_block', CASE WHEN (btbl.'unit_lbs') THEN (btbl.'unit_lbs' || '  ') ELSE (' ') END || btbl.'species_strain' || '', 'lc_syringe', IF(btbl.'net_volume_ml', ROUND((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'net_volume_ml')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, (((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' mL  ', '') || btbl.'species_strain' || '', 'freezedriedmushrooms', IF(btbl.'package_size_g', ROUND(btbl.'package_size_g',2) || ' g  ', '') || btbl.'species_strain' || '', 'freezer_tray', IF(btbl.'net_weight_g', ROUND(btbl.'net_weight_g',2) || ' g  ', '') || btbl.'species_strain' || '', 'fresh_tray', IF(btbl.'net_weight_g', ROUND(btbl.'net_weight_g',2) || ' g  ', '') || btbl.'species_strain' || '', 'fresh_mushrooms', IF(btbl.'package_size_g', ROUND(btbl.'package_size_g',2) || ' g  ', '') || btbl.'species_strain' || '', '')) ORDER BY (CASE WHEN (btbl.'item_category_mat') = ('grain') THEN (CASE WHEN (btbl.'unit_lbs') ELSE ('') END THEN (btbl.'unit_lbs' || '  ' || btbl.'process_type' || 'd') ELSE ('') END, 'substrate', CASE WHEN (btbl.'unit_lbs') THEN (btbl.'unit_lbs' || '  ' || btbl.'process_type' || 'd') ELSE ('') END, 'fruiting_block', CASE WHEN (btbl.'unit_lbs') THEN (btbl.'unit_lbs' || '  ') ELSE (' ') END || btbl.'species_strain' || '', 'lc_syringe', IF(btbl.'net_volume_ml', ROUND((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'net_volume_ml')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, (((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' mL  ', '') || btbl.'species_strain' || '', 'freezedriedmushrooms', IF(btbl.'package_size_g', ROUND(btbl.'package_size_g',2) || ' g  ', '') || btbl.'species_strain' || '', 'freezer_tray', IF(btbl.'net_weight_g', ROUND(btbl.'net_weight_g',2) || ' g  ', '') || btbl.'species_strain' || '', 'fresh_tray', IF(btbl.'net_weight_g', ROUND(btbl.'net_weight_g',2) || ' g  ', '') || btbl.'species_strain' || '', 'fresh_mushrooms', IF(btbl.'package_size_g', ROUND(btbl.'package_size_g',2) || ' g  ', '') || btbl.'species_strain' || '', ''))) FILTER (WHERE (CASE WHEN (btbl.'item_category_mat') = ('grain') THEN (CASE WHEN (btbl.'unit_lbs') ELSE ('') END THEN (btbl.'unit_lbs' || '  ' || btbl.'process_type' || 'd') ELSE ('') END, 'substrate', CASE WHEN (btbl.'unit_lbs') THEN (btbl.'unit_lbs' || '  ' || btbl.'process_type' || 'd') ELSE ('') END, 'fruiting_block', CASE WHEN (btbl.'unit_lbs') THEN (btbl.'unit_lbs' || '  ') ELSE (' ') END || btbl.'species_strain' || '', 'lc_syringe', IF(btbl.'net_volume_ml', ROUND((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl.'net_volume_ml')::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric)::numeric, (((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((2)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int) || ' mL  ', '') || btbl.'species_strain' || '', 'freezedriedmushrooms', IF(btbl.'package_size_g', ROUND(btbl.'package_size_g',2) || ' g  ', '') || btbl.'species_strain' || '', 'freezer_tray', IF(btbl.'net_weight_g', ROUND(btbl.'net_weight_g',2) || ' g  ', '') || btbl.'species_strain' || '', 'fresh_tray', IF(btbl.'net_weight_g', ROUND(btbl.'net_weight_g',2) || ' g  ', '') || btbl.'species_strain' || '', 'fresh_mushrooms', IF(btbl.'package_size_g', ROUND(btbl.'package_size_g',2) || ' g  ', '') || btbl.'species_strain' || '', '')) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_subtitle_prod_from_product_id",
    (SELECT COALESCE(array_agg((btbl.'product_id') ORDER BY (btbl.'product_id')) FILTER (WHERE (btbl.'product_id') IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_footer_prod_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('') ELSE (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')))) END THEN ('This product was produced in a home kitchen that is not subject to state licensure or inspection and that may also contain common food allergies such as tree nuts, peanuts, eggs, soy, wheat, milk, fish, and crustacean shellfish. This product is not intended for resale.') ELSE (CASE WHEN (btbl.'item_category_mat' = 'fruiting_block') END THEN ('This product contains ingredients designed for mushroom cultivation. This product is not intended for human consumption.') ELSE ('') END ) ), CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')))) THEN ('This product was produced in a home kitchen that is not subject to state licensure or inspection and that may also contain common food allergies such as tree nuts, peanuts, eggs, soy, wheat, milk, fish, and crustacean shellfish. This product is not intended for resale.') ELSE (CASE WHEN (btbl.'item_category_mat' = 'fruiting_block') END THEN ('This product contains ingredients designed for mushroom cultivation. This product is not intended for human consumption.') ELSE ('') END ) )) ORDER BY (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('') ELSE (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')))) END THEN ('This product was produced in a home kitchen that is not subject to state licensure or inspection and that may also contain common food allergies such as tree nuts, peanuts, eggs, soy, wheat, milk, fish, and crustacean shellfish. This product is not intended for resale.') ELSE (CASE WHEN (btbl.'item_category_mat' = 'fruiting_block') END THEN ('This product contains ingredients designed for mushroom cultivation. This product is not intended for human consumption.') ELSE ('') END ) ), CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')))) THEN ('This product was produced in a home kitchen that is not subject to state licensure or inspection and that may also contain common food allergies such as tree nuts, peanuts, eggs, soy, wheat, milk, fish, and crustacean shellfish. This product is not intended for resale.') ELSE (CASE WHEN (btbl.'item_category_mat' = 'fruiting_block') END THEN ('This product contains ingredients designed for mushroom cultivation. This product is not intended for human consumption.') ELSE ('') END ) ))) FILTER (WHERE (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('') ELSE (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')))) END THEN ('This product was produced in a home kitchen that is not subject to state licensure or inspection and that may also contain common food allergies such as tree nuts, peanuts, eggs, soy, wheat, milk, fish, and crustacean shellfish. This product is not intended for resale.') ELSE (CASE WHEN (btbl.'item_category_mat' = 'fruiting_block') END THEN ('This product contains ingredients designed for mushroom cultivation. This product is not intended for human consumption.') ELSE ('') END ) ), CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')))) THEN ('This product was produced in a home kitchen that is not subject to state licensure or inspection and that may also contain common food allergies such as tree nuts, peanuts, eggs, soy, wheat, milk, fish, and crustacean shellfish. This product is not intended for resale.') ELSE (CASE WHEN (btbl.'item_category_mat' = 'fruiting_block') END THEN ('This product contains ingredients designed for mushroom cultivation. This product is not intended for human consumption.') ELSE ('') END ) )) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_cottage_prod_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('') ELSE (CASE WHEN (btbl.'item_category_mat' = 'fruiting_block') END THEN ('MyBusinessOffering') ELSE ('') END ), CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'fruiting_block')))) THEN ('MyBusinessOffering') ELSE ('') END )) ORDER BY (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('') ELSE (CASE WHEN (btbl.'item_category_mat' = 'fruiting_block') END THEN ('MyBusinessOffering') ELSE ('') END ), CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'fruiting_block')))) THEN ('MyBusinessOffering') ELSE ('') END ))) FILTER (WHERE (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('') ELSE (CASE WHEN (btbl.'item_category_mat' = 'fruiting_block') END THEN ('MyBusinessOffering') ELSE ('') END ), CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'fruiting_block')))) THEN ('MyBusinessOffering') ELSE ('') END )) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_companyinfo_prod_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')) ((btbl.'item_category_mat' = 'fruitingblock')))) ELSE (NULL) END THEN ('') ELSE ('Disclaimer: Psilocybin is classified as a Schedule I controlled substance by the U.S. Drug Enforcement Administration (DEA). Unauthorized cultivation, possession, or distribution of psilocybin-containing mushrooms is illegal in most states. It is the responsibility of the buyer to research and comply with all local, state, and federal laws regarding mushroom cultivation. Please consult your local laws carefully before any attempt to grow mushrooms, as penalties for non-compliance can be significant.') END, '')) ORDER BY (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')) ((btbl.'item_category_mat' = 'fruitingblock')))) ELSE (NULL) END THEN ('') ELSE ('Disclaimer: Psilocybin is classified as a Schedule I controlled substance by the U.S. Drug Enforcement Administration (DEA). Unauthorized cultivation, possession, or distribution of psilocybin-containing mushrooms is illegal in most states. It is the responsibility of the buyer to research and comply with all local, state, and federal laws regarding mushroom cultivation. Please consult your local laws carefully before any attempt to grow mushrooms, as penalties for non-compliance can be significant.') END, ''))) FILTER (WHERE (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')) ((btbl.'item_category_mat' = 'fruitingblock')))) ELSE (NULL) END THEN ('') ELSE ('Disclaimer: Psilocybin is classified as a Schedule I controlled substance by the U.S. Drug Enforcement Administration (DEA). Unauthorized cultivation, possession, or distribution of psilocybin-containing mushrooms is illegal in most states. It is the responsibility of the buyer to research and comply with all local, state, and federal laws regarding mushroom cultivation. Please consult your local laws carefully before any attempt to grow mushrooms, as penalties for non-compliance can be significant.') END, '')) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_disclaimer_prod_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('RegulatedBusinessAddressAndContact') ELSE ('MyBuinessAddressAndContact') END, 'MyBuinessAddressAndContact')) ORDER BY (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('RegulatedBusinessAddressAndContact') ELSE ('MyBuinessAddressAndContact') END, 'MyBuinessAddressAndContact'))) FILTER (WHERE (CASE WHEN (btbl.'origin_strain_regulated') THEN (CASE WHEN (((btbl.'item_category_mat' = 'freezedriedmushrooms') ((btbl.'item_category_mat' = 'fresh_mushrooms')) ((btbl.'item_category_mat' = 'freezer_tray')) ((btbl.'item_category_mat' = 'fresh_tray')))) ELSE (NULL) END THEN ('RegulatedBusinessAddressAndContact') ELSE ('MyBuinessAddressAndContact') END, 'MyBuinessAddressAndContact')) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_companyaddress_prod_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'pack_date') THEN ('Packaged: ' || to_char(((btbl.'pack_date'))::timestamp) ELSE ('YYYY-MM-DD') END, '')) ORDER BY (CASE WHEN (btbl.'pack_date') THEN ('Packaged: ' || to_char(((btbl.'pack_date'))::timestamp) ELSE ('YYYY-MM-DD') END, ''))) FILTER (WHERE (CASE WHEN (btbl.'pack_date') THEN ('Packaged: ' || to_char(((btbl.'pack_date'))::timestamp) ELSE ('YYYY-MM-DD') END, '')) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_packaged_prod_from_product_id",
    (SELECT COALESCE(array_agg((CASE WHEN (btbl.'use_by') THEN ('Use by: ' || to_char(((btbl.'use_by'))::timestamp) ELSE ('YYYY-MM-DD') END, '' )) ORDER BY (CASE WHEN (btbl.'use_by') THEN ('Use by: ' || to_char(((btbl.'use_by'))::timestamp) ELSE ('YYYY-MM-DD') END, '' ))) FILTER (WHERE (CASE WHEN (btbl.'use_by') THEN ('Use by: ' || to_char(((btbl.'use_by'))::timestamp) ELSE ('YYYY-MM-DD') END, '' )) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_print_queue_products_product_id" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."print_queue_id" = base.nocopk) AS "label_useby_prod_from_product_id",
    '{}'::text[] AS "label_proc_prod_from_product_id",
    '{}'::text[] AS "label_spawned_prod_from_product_id",
    '{}'::text[] AS "label_inoc_prod_from_product_id"
  FROM "public"."v_print_queue" base
)
SELECT comp.*,
  ('PRINT-' || to_char((comp."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((comp."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)) AS "print_id",
  (CASE WHEN (comp.'source_kind' = 'steri_sheet') THEN ('SHEETS') ELSE (CASE WHEN (((comp.'item_category_mat_from_product_id' = 'fresh_mushrooms') ((comp.'item_category_mat_from_product_id' = 'freezer_tray')) ((comp.'item_category_mat_from_product_id' = 'fresh_tray')) ((comp.'item_category_mat_from_lot_id' = 'fresh_mushrooms')) ((comp.'item_category_mat_from_lot_id' = 'freezer_tray')) ((comp.'item_category_mat_from_lot_id' = 'fresh_tray')))) END THEN ('TRAYS') ELSE ('ZEBRA') END)) AS "print_target"
FROM comp;

CREATE VIEW "public"."vc_ecommerce" AS
WITH comp AS (
  SELECT base.*,
    (SELECT COALESCE(array_agg(('PROD-' || to_char((btbl."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)) ORDER BY ('PROD-' || to_char((btbl."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int))) FILTER (WHERE ('PROD-' || to_char((btbl."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_ecommerce_products_products" j JOIN "public"."products" btbl ON btbl.nocopk = j."products_id" WHERE j."ecommerce_id" = base.nocopk) AS "available_from_products",
    (SELECT COALESCE(array_agg(('LOT-' || to_char((btbl."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)) ORDER BY ('LOT-' || to_char((btbl."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int))) FILTER (WHERE ('LOT-' || to_char((btbl."nc_created_at")::timestamp, 'YYMMDD') || '-' || RIGHT(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((btbl."airtable_id")::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text)::text, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((4)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)::int)) IS NOT NULL), '{}'::text[]) FROM "public"."_m2m_ecommerce_lots_lots" j JOIN "public"."lots" btbl ON btbl.nocopk = j."lots_id" WHERE j."ecommerce_id" = base.nocopk) AS "available_from_lots"
  FROM "public"."v_ecommerce" base
)
SELECT comp.*,
  
FROM comp;

CREATE VIEW "public"."vc_ecommerce_orders" AS SELECT * FROM "public"."v_ecommerce_orders";

COMMIT;
